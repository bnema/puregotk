// Package gtk was automatically generated by github.com/jwijenbergh/puregotk DO NOT EDIT
package gtk

import (
	"structs"
	"unsafe"

	"github.com/jwijenbergh/purego"
	"github.com/jwijenbergh/puregotk/pkg/core"
	"github.com/jwijenbergh/puregotk/v4/glib"
	"github.com/jwijenbergh/puregotk/v4/gobject/types"
)

type CustomSorterClass struct {
	_ structs.HostLayout

	ParentClass SorterClass
}

func (x *CustomSorterClass) GoPointer() uintptr {
	return uintptr(unsafe.Pointer(x))
}

// Sorts items via a callback function.
type CustomSorter struct {
	Sorter
}

var xCustomSorterGLibType func() types.GType

func CustomSorterGLibType() types.GType {
	return xCustomSorterGLibType()
}

func CustomSorterNewFromInternalPtr(ptr uintptr) *CustomSorter {
	cls := &CustomSorter{}
	cls.Ptr = ptr
	return cls
}

var xNewCustomSorter func(uintptr, uintptr, uintptr) uintptr

// Creates a new `GtkSorter` that works by calling
// @sort_func to compare items.
//
// If @sort_func is %NULL, all items are considered equal.
func NewCustomSorter(SortFuncVar *glib.CompareDataFunc, UserDataVar uintptr, UserDestroyVar *glib.DestroyNotify) *CustomSorter {
	var cls *CustomSorter

	var SortFuncVarRef uintptr
	if SortFuncVar != nil {
		SortFuncVarPtr := uintptr(unsafe.Pointer(SortFuncVar))
		if cbRefPtr, ok := glib.GetCallback(SortFuncVarPtr); ok {
			SortFuncVarRef = cbRefPtr
		} else {
			fcb := func(arg0 uintptr, arg1 uintptr, arg2 uintptr) int {
				cbFn := *SortFuncVar
				return cbFn(arg0, arg1, arg2)
			}
			SortFuncVarRef = purego.NewCallback(fcb)
			glib.SaveCallback(SortFuncVarPtr, SortFuncVarRef)
		}
	}

	var UserDestroyVarRef uintptr
	if UserDestroyVar != nil {
		UserDestroyVarPtr := uintptr(unsafe.Pointer(UserDestroyVar))
		if cbRefPtr, ok := glib.GetCallback(UserDestroyVarPtr); ok {
			UserDestroyVarRef = cbRefPtr
		} else {
			fcb := func(arg0 uintptr) {
				cbFn := *UserDestroyVar
				cbFn(arg0)
			}
			UserDestroyVarRef = purego.NewCallback(fcb)
			glib.SaveCallback(UserDestroyVarPtr, UserDestroyVarRef)
		}
	}

	cret := xNewCustomSorter(SortFuncVarRef, UserDataVar, UserDestroyVarRef)

	if cret == 0 {
		return nil
	}
	cls = &CustomSorter{}
	cls.Ptr = cret
	return cls
}

var xCustomSorterSetSortFunc func(uintptr, uintptr, uintptr, uintptr)

// Sets (or unsets) the function used for sorting items.
//
// If @sort_func is %NULL, all items are considered equal.
//
// If the sort func changes its sorting behavior,
// gtk_sorter_changed() needs to be called.
//
// If a previous function was set, its @user_destroy will be
// called now.
func (x *CustomSorter) SetSortFunc(SortFuncVar *glib.CompareDataFunc, UserDataVar uintptr, UserDestroyVar *glib.DestroyNotify) {

	var SortFuncVarRef uintptr
	if SortFuncVar != nil {
		SortFuncVarPtr := uintptr(unsafe.Pointer(SortFuncVar))
		if cbRefPtr, ok := glib.GetCallback(SortFuncVarPtr); ok {
			SortFuncVarRef = cbRefPtr
		} else {
			fcb := func(arg0 uintptr, arg1 uintptr, arg2 uintptr) int {
				cbFn := *SortFuncVar
				return cbFn(arg0, arg1, arg2)
			}
			SortFuncVarRef = purego.NewCallback(fcb)
			glib.SaveCallback(SortFuncVarPtr, SortFuncVarRef)
		}
	}

	var UserDestroyVarRef uintptr
	if UserDestroyVar != nil {
		UserDestroyVarPtr := uintptr(unsafe.Pointer(UserDestroyVar))
		if cbRefPtr, ok := glib.GetCallback(UserDestroyVarPtr); ok {
			UserDestroyVarRef = cbRefPtr
		} else {
			fcb := func(arg0 uintptr) {
				cbFn := *UserDestroyVar
				cbFn(arg0)
			}
			UserDestroyVarRef = purego.NewCallback(fcb)
			glib.SaveCallback(UserDestroyVarPtr, UserDestroyVarRef)
		}
	}

	xCustomSorterSetSortFunc(x.GoPointer(), SortFuncVarRef, UserDataVar, UserDestroyVarRef)

}

func (c *CustomSorter) GoPointer() uintptr {
	if c == nil {
		return 0
	}
	return c.Ptr
}

func (c *CustomSorter) SetGoPointer(ptr uintptr) {
	c.Ptr = ptr
}

func init() {
	core.SetPackageName("GTK", "gtk4")
	core.SetSharedLibraries("GTK", []string{"libgtk-4.so.1"})
	var libs []uintptr
	for _, libPath := range core.GetPaths("GTK") {
		lib, err := purego.Dlopen(libPath, purego.RTLD_NOW|purego.RTLD_GLOBAL)
		if err != nil {
			panic(err)
		}
		libs = append(libs, lib)
	}

	core.PuregoSafeRegister(&xCustomSorterGLibType, libs, "gtk_custom_sorter_get_type")

	core.PuregoSafeRegister(&xNewCustomSorter, libs, "gtk_custom_sorter_new")

	core.PuregoSafeRegister(&xCustomSorterSetSortFunc, libs, "gtk_custom_sorter_set_sort_func")

}
